=========================================
   ğŸ“Š Kubernetes Vertical Pod Autoscaler
=========================================

Today I learned about **Vertical Pod Autoscaler (VPA)**, which automatically
adjusts CPU and memory requests and limits for Pods based on actual usage.


=========================================
1. ğŸ§© What is VPA?
=========================================

**VPA** helps optimize resource usage by **increasing or decreasing
CPU and memory requests** for Pods.

Unlike HPA:
- VPA scales **resources per Pod**
- HPA scales **number of Pods**

VPA is useful when workloads are hard to size manually.


=========================================
2. ğŸ”„ How VPA Works
=========================================

VPA continuously monitors Pod resource usage and provides recommendations.

Flow:
Metrics Server
    â†“
VPA Recommender
    â†“
VPA Updater
    â†“
Pod resource requests updated

When changes are applied, Pods may be **restarted**.


=========================================
3. âš™ VPA Components
=========================================

VPA consists of:

- Recommender â†’ Calculates resource recommendations
- Updater     â†’ Applies updates (may restart Pods)
- Admission Controller â†’ Sets resources on Pod creation


=========================================
4. ğŸ¯ VPA Modes
=========================================

VPA supports different operating modes:

-----------------------------------------
ğŸ”¹ Off
-----------------------------------------
- Only provides recommendations
- Does not change Pod resources

-----------------------------------------
ğŸ”¹ Initial
-----------------------------------------
- Applies recommendations only at Pod creation
- No runtime updates

-----------------------------------------
ğŸ”¹ Auto
-----------------------------------------
- Automatically updates resource requests
- Restarts Pods if required


=========================================
5. ğŸ“˜ VPA YAML Example
=========================================

apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: myapp-vpa
spec:
  targetRef:
    apiVersion: "apps/v1"
    kind: Deployment
    name: myapp
  updatePolicy:
    updateMode: "Auto"


=========================================
6. âš  Limitations & Considerations
=========================================

- Pod restarts may occur
- Not ideal for latency-sensitive apps
- Cannot be used with HPA on CPU/memory
- Works best with long-running workloads

VPA is mainly focused on **resource optimization**, not traffic scaling.


=========================================
7. ğŸŒ Real-World Usage
=========================================

VPA is used for:

- Backend services with unpredictable load
- Batch jobs and workers
- Cost optimization
- Right-sizing applications
- Reducing over-provisioning

Common approach:
- Use VPA in recommendation mode first
- Apply auto mode after confidence


=========================================
8. ğŸ”„ HPA vs VPA (Quick Comparison)
=========================================

HPA:
- Scales number of Pods
- Based on CPU/memory/metrics
- No Pod restarts

VPA:
- Scales CPU & memory per Pod
- Based on usage history
- Pod restarts possible


=========================================
âœ… Summary
=========================================

Vertical Pod Autoscaler:
    â†’ Automatically adjusts Pod resource requests

Modes:
    â†’ Off | Initial | Auto

Best For:
    â†’ Resource optimization
    â†’ Hard-to-size workloads

Key Note:
    â†’ Not used together with HPA on CPU/memory